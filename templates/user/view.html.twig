{% extends 'base.html.twig' %}

{% block title %}{{ student.username }}{% endblock %}

{% block body %}

<div>
    <h1>{{ student.username }}</h1>

    <div>
        {% for subject in subjects %}
            <a href="{{ url('view_student', {'id': student.id, 'subjectID': subject.id}) }}">{{ subject.name }}</a>
        {% endfor %}
    </div>

    <canvas id="chart" style="width:100%; height:400px;"></canvas>

    <div>
        Ajouter une note
        
        {{ form_start(form) }}
            {{ form_row(form.value) }}
            {{ form_row(form.save) }}
        {{ form_end(form) }}
    </div>
</div>

<script>
    const xValues =
    [
        {% for grade in grades %}
            "{{ grade.date | date("d/m/Y") }}",
        {% endfor %}
    ];

    const yValues =
    [
        {% for grade in grades %}
            "{{ grade.value }}",
        {% endfor %}
    ];
    
    const ctx = document.getElementById("chart").getContext("2d");
    const myChart = new Chart(ctx,
    {
        type: "line",
        data:
        {
            labels: xValues,
            datasets:
            [{
                fill: false,
                lineTension: 0,
                backgroundColor: "rgba(0,0,255,1.0)",
                borderColor: "rgba(0,0,255,0.1)",
                data: yValues
            }]
        },
        options:
        {
            legend: {display: false}
        }
    });
</script>

{% endblock %}
